import React from 'react';
import classNames from 'classnames';

import useFetch from 'hooks/use-fetch';

const AddToFollow = ({isFollowing, username, userSlug}) => {
    const apiUrl = `${userSlug}/follow`;
    const [{response}, doFetch] = useFetch(apiUrl);
    const isFollowedWithResponse = response ? response.profile.following : isFollowing;
    const isFollowingUser = isFollowedWithResponse ? 'Unfollow' : 'Follow';
    // console.log('response', response);
    // console.log('isFollowing', isFollowing);
    // console.log('isFollowedWithResponse', isFollowedWithResponse);


    const buttonClasses = classNames({
        btn: true,
        'follow-btn': true,
        'btn-sm': true,
        'btn-primary': !isFollowedWithResponse,
        'btn-outline-primary': isFollowedWithResponse

    });

    const handleFollow = event => {
        event.preventDefault();
        doFetch({
            method: isFollowedWithResponse ? 'delete' : 'post'
        });
    };

    return (
        <button className={buttonClasses} onClick={handleFollow}>
            <i className="fas fa-plus" />
            <span>&nbsp; {isFollowingUser} {username}</span>
        </button>

    )
};

export default AddToFollow;